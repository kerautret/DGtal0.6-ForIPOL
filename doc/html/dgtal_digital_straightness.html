<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DGtal: Patterns, digital straight lines and subsegments</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">0.6.devel</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Patterns, digital straight lines and subsegments </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#dgtal_digstraighness_sec1">Standard digital straight lines and patterns</a></li>
<li class="level1"><a href="#dgtal_digstraighness_sec2">Patterns</a><ul><li class="level2"><a href="#dgtal_digstraighness_sec2_1">Definition of patterns</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec2_2">Creating patterns in DGtal</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec2_3">Recursive properties of patterns</a></li>
</ul>
</li>
<li class="level1"><a href="#dgtal_digstraighness_sec3">Digital straight lines and subsegments</a><ul><li class="level2"><a href="#dgtal_digstraighness_sec3_1">Creating a digital straight line</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec3_2">A DSL is a sequence of points in the digital plane</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec3_3">Getting several characteristics</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec3_4">Getting points on a DSL</a></li>
<li class="level2"><a href="#dgtal_digstraighness_sec3_5">Fast computation of subsegments</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><dl class="section user"><dt>Author(s) of this documentation:</dt><dd>Jacques-Olivier Lachaud</dd></dl>
<p>Part of the <a class="el" href="pageArithmeticPackage.html">Arithmetic package</a>.</p>
<p>This part of the manual describes digital straightness from a combinatoric and arithmetic point of view. It tells you how to create patterns, digital straight lines in the first quadrant, and how to compute subsegments in sublinear time (algorithms SmartDSS [Said, Lachaud, Feschet 2009 : <a class="el" href="citelist.html#CITEREF_Said:2009-dgci">Said:2009-dgci</a> ] and ReversedSmartDSS [Said, Lachaud 2011 : <a class="el" href="citelist.html#CITEREF_Said:2011-dgci">Said:2011-dgci</a>]).</p>
<h1><a class="anchor" id="dgtal_digstraighness_sec1"></a>
Standard digital straight lines and patterns</h1>
<p>A <b>standard</b> <b>digital</b> <b>straight</b> <b>line</b> in 2D (DSL) is the following subset of \( Z^2 \):</p>
<p>\( \{(x,y) \in Z^2, \mu \le a x - by &lt; \mu + |a| +|b|-1 \} \)</p>
<p>where the integers \( (a,b,\mu) \), \( gcd(a,b)=1 \), are called the <b>characteristics</b> of the straight line [ Reveilles <a class="el" href="citelist.html#CITEREF_Reveilles:1991-thesis">Reveilles:1991-thesis</a> , Debled and Reveilles <a class="el" href="citelist.html#CITEREF_Debled:1995-ijprai">Debled:1995-ijprai</a> ].</p>
<p>It is well known that this set of digital points is a simple 4-connected curve. Here is a representation of the straight line (3,5,-5).</p>
<div class="image">
<img src="dsl-standard-s.png" alt="dsl-standard-s.png"/>
<div class="caption">
Standard Digital Straight Line of characteristics (3,5,-5)</div></div>
<p>The <b>slope</b> of the DSL is \( a/b \), while \( \mu \) is the <b>shift</b> at origin. The <em>remainder</em> of the DSL is the value \( ax-by \). <b>Upper</b> <b>leaning</b> <b>points</b> have remainer \( \mu \) while <b>lower</b> <b>leaning</b> <b>points</b> have value \( \mu + |a| +|b|-1 \).</p>
<h1><a class="anchor" id="dgtal_digstraighness_sec2"></a>
Patterns</h1>
<h2><a class="anchor" id="dgtal_digstraighness_sec2_1"></a>
Definition of patterns</h2>
<p>A <b>pattern</b> of slope \( a/b \) is the freeman chaincode between two consecutive upper leaning points of any DSL with slope \( a/b \).</p>
<p>Patterns are specific subsegments of digital straight lines (DSL). They depend only on the slope of the DSL, i.e. the irreducible fraction \( a/b \).</p>
<h2><a class="anchor" id="dgtal_digstraighness_sec2_2"></a>
Creating patterns in DGtal</h2>
<p>Package Arithmetic provides the class <a class="el" href="classDGtal_1_1Pattern.html" title="Aim: This class represents a pattern, i.e. the path between two consecutive upper leaning points on a...">Pattern</a> to represent a pattern. Patterns are instantiated either by a fraction or two integers <em>p</em> and <em>q</em>. They are therefore parameterized by the type of irreducible fraction you wish to use (see <a class="el" href="dgtal_irreducible_fraction.html">Irreducible fraction, continued fractions</a>). You may define patterns as follows:</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="pattern_8cpp_source.html">pattern.cpp</a></dd></dl>
<div class="fragment"><div class="line">  <span class="keyword">typedef</span> <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a" title="signed 32-bit integer.">DGtal::int32_t</a> <a class="code" href="namespaceDGtal_1_1Z2i.html#a5d93c6632713d21e2662c93af3a941e6">Integer</a>;</div>
<div class="line">  <span class="keyword">typedef</span> <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a" title="signed 32-bit integer.">DGtal::int32_t</a> Quotient;</div>
<div class="line">  <span class="keyword">typedef</span> LighterSternBrocot&lt;Integer, Quotient, StdMapRebinder&gt; SB; <span class="comment">// the type of the Stern-Brocot tree</span></div>
<div class="line">  <span class="keyword">typedef</span> SB::Fraction Fraction; <span class="comment">// the type for fractions</span></div>
<div class="line">  <span class="keyword">typedef</span> Pattern&lt;Fraction&gt; MyPattern; <span class="comment">// the type for patterns</span></div>
</div><!-- fragment --><div class="fragment"><div class="line">  <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a" title="signed 32-bit integer.">DGtal::int32_t</a> p = atoi( argv[ 1 ] );</div>
<div class="line">  <a class="code" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a" title="signed 32-bit integer.">DGtal::int32_t</a> q = atoi( argv[ 2 ] );</div>
<div class="line">  MyPattern pattern( p, q );</div>
</div><!-- fragment --><p> To get the freeman chaincode of the pattern, you may use the methods <a class="el" href="classDGtal_1_1Pattern.html#a4b8ae71d3c324754362ebda40dfe7252">Pattern::rE</a> and <a class="el" href="classDGtal_1_1Pattern.html#a31c2124654d81e728529e14de9d651cc">Pattern::rEs</a>.</p>
<div class="fragment"><div class="line">  <span class="keywordtype">bool</span> sub = ( argc &gt; 3 ) &amp;&amp; ( std::string( argv[ 3 ] ) == <span class="stringliteral">&quot;SUB&quot;</span> );</div>
<div class="line">  std::cout &lt;&lt; ( ! sub ? pattern.rE() : pattern.rEs( <span class="stringliteral">&quot;(|)&quot;</span> ) ) &lt;&lt; std::endl;</div>
</div><!-- fragment --> <pre class="fragment">$ ./examples/arithmetic/pattern 11 17 
0010010100101001010010100101
$ ./examples/arithmetic/pattern 11 17 SUB
((00|1)|(0|0101)(0|0101)(0|0101)(0|0101)(0|0101))
</pre><h2><a class="anchor" id="dgtal_digstraighness_sec2_3"></a>
Recursive properties of patterns</h2>
<p>Recursive definitions of pattern are related to the continued fraction of the slope. We choose here to present the Berstel recursive definition. If \( z=p/q=[u_0;u_1,\ldots,u_n] \) is the slope of the pattern, the pattern may be obtained from the following recursive formulas:</p>
<p>\( E(z_{-1})=1, E(z_{0})=0, E(z_{2k+1})=E(z_{2k})^{u_{2k+1}} E(z_{2k-1}), E(z_{2k})=E(z_{2k-2}) E(z_{2k-1})^{u_{2k}}. \)</p>
<p>Let us look again at the pattern of 11/17. First, the convergents are:</p>
<pre class="fragment">$ ./examples/arithmetic/convergents 11 17 
z = [0,1,1,1,5]
z_0 = 0 / 1
z_1 = 1 / 1
z_2 = 1 / 2
z_3 = 2 / 3
z_4 = 11 / 17
</pre><pre class="fragment">E(0/1) = 0
E(1/1) = E([0;1]) = E(0/1)^1 E(z_-1) = 0.1
E(1/2) = E([0;1,1]) = E(0/1) E(1/1)^1 = 0.01
E(2/3) = E([0;1,1,1]) = E(1/2)^1 E(1/1) = 001.01
E(11/17) = E([0;1,1,1,5]) = E(1/2) E(2/3)^5 = 001.(00101)^5
</pre><p>Which is exactly the sought pattern.</p>
<p>There are several methods to compute the Bézout vector of a pattern or the coordinates of its upper and lower leaning points (see reference of class <a class="el" href="classDGtal_1_1Pattern.html" title="Aim: This class represents a pattern, i.e. the path between two consecutive upper leaning points on a...">Pattern</a>).</p>
<h1><a class="anchor" id="dgtal_digstraighness_sec3"></a>
Digital straight lines and subsegments</h1>
<h2><a class="anchor" id="dgtal_digstraighness_sec3_1"></a>
Creating a digital straight line</h2>
<p>For now, you may only instantiate digital straight lines whose slope is in the first quadrant. If \( (a,b,\mu) \) are the characteristics of the line, then \( a \ge 0, b \ge 0 \).</p>
<div class="fragment"><div class="line">...</div>
<div class="line">#include <span class="stringliteral">&quot;DGtal/arithmetic/StandardDSLQ0.h&quot;</span></div>
<div class="line">...</div>
<div class="line">typedef ... Fraction;</div>
<div class="line"><span class="keyword">typedef</span> StandardDSLQ0&lt;Fraction&gt; DSL;</div>
<div class="line">...</div>
<div class="line">DSL D( 3, 5, -5 );</div>
</div><!-- fragment --><h2><a class="anchor" id="dgtal_digstraighness_sec3_2"></a>
A DSL is a sequence of points in the digital plane</h2>
<p>A DSL provides the function operator StandardDSLQ0::operator(), taking a <em>Point</em> <em>p</em> and returning 'true' iff <em>p</em> belongs to the set of points of the DSL. It is indeed a model of <a class="el" href="structDGtal_1_1CPointPredicate.html" title="Aim: Defines a predicate on a point.">CPointPredicate</a>.</p>
<p>The <em>Point</em> type is PointVector&lt;2,Fraction::Integer&gt;.</p>
<p>You may visit the DSL from left to right with iterators of type <a class="el" href="structDGtal_1_1StandardDSLQ0_1_1ConstIterator.html">StandardDSLQ0::ConstIterator</a>. You just precise the starting point with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a87f6827c0497501c7ee26a6cdfe66a16">StandardDSLQ0::begin</a> and the point after the last with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a327b9cb1d938b08eb6bf609414b30623">StandardDSLQ0::end</a>.</p>
<p>You can compare if a point precedes another point (to the left) on the DSL with methods <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a1f5d130cee8f14a641bc8b27c4057c4a">StandardDSLQ0::before</a> and <a class="el" href="classDGtal_1_1StandardDSLQ0.html#adce77abc9ef1cfe070ce95c3859a3127">StandardDSLQ0::beforeOrEqual</a>.</p>
<h2><a class="anchor" id="dgtal_digstraighness_sec3_3"></a>
Getting several characteristics</h2>
<p>You have access to the following information:</p>
<ul>
<li>characteristics \((a,b,\mu)\) with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a231c27a961a80c69ed5b5b62b692ded6">StandardDSLQ0::a</a>, <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a4a8e97036361bdbc75e11ca1256aac80">StandardDSLQ0::b</a>, <a class="el" href="classDGtal_1_1StandardDSLQ0.html#ae825d370c1437dc93ad64ba25d79b8ff">StandardDSLQ0::mu</a></li>
<li>value \(\mu+a+b-1\) with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#aefa5c4b81b5b2eba57433e9fc371a9e0">StandardDSLQ0::mup</a></li>
<li>slope as irreducible fraction with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#aa0e6f2a61969496eb535cd98e615c1b3">StandardDSLQ0::slope</a></li>
<li>pattern of same slope with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a8afc324a627c22423583a0672612a946">StandardDSLQ0::pattern</a></li>
<li>vector of the pattern (i.e (b,a)) with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a15199726ea8ebee6b00c79a8e17f890e">StandardDSLQ0::v</a></li>
<li>remainder of the DSL with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#ab38e8abf569efbac70b65ef468d91380">StandardDSLQ0::r</a></li>
<li>first upper leaning point with x&gt;=0 with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#ad30cac5c4af94193b774bb94a7c6666f">StandardDSLQ0::U</a></li>
<li>first lower leaning point after the first upper leaning point with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a633a5546f3941f055b385587f294129b">StandardDSLQ0::L</a></li>
</ul>
<h2><a class="anchor" id="dgtal_digstraighness_sec3_4"></a>
Getting points on a DSL</h2>
<p>For convenience, you have the following methods to determine points belonging to a DSL:</p>
<ul>
<li>given an x-coordinate, find the point with lowest y-coordinate on the DSL with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a7b4802d1b13af0a5f100c67b6cbd8216">StandardDSLQ0::lowestY</a></li>
<li>given an x-coordinate, find the point with uppermost y-coordinate on the DSL with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a0aa90c71bf7d2d8063fff0a68bd53432">StandardDSLQ0::uppermostY</a></li>
<li>given a y-coordinate, find the point with lowest x-coordinate on the DSL with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a57d6d71f4ca85a6fc7b60641be36f3a1">StandardDSLQ0::lowestX</a></li>
<li>given a y-coordinate, find the point with uppermost x-coordinate on the DSL with <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a4377810c06a4b713494ed4fa9881c5fa">StandardDSLQ0::uppermostX</a></li>
</ul>
<h2><a class="anchor" id="dgtal_digstraighness_sec3_5"></a>
Fast computation of subsegments</h2>
<p>Given two points <em>A</em> and <em>B</em> on the DSL, you can determine the exact characteristics of the subsegment [A,B] in sublinear time with two algorithms: SmartDSS [Said, Lachaud, Feschet 2009 : <a class="el" href="citelist.html#CITEREF_Said:2009-dgci">Said:2009-dgci</a> ] and ReversedSmartDSS [Said, Lachaud 2011 : <a class="el" href="citelist.html#CITEREF_Said:2011-dgci">Said:2011-dgci</a>]. In fact, these algorithms return the DSL which covers [A,B] and whose characteristics are minimal.</p>
<ul>
<li>method <a class="el" href="classDGtal_1_1StandardDSLQ0.html#abcc7cc35477c5c4758e2f77aba905470">StandardDSLQ0::smartDSS</a>, given this DSL, <em>A</em> and <em>B</em>, returns this minimal DSL in time proportional to the sum of the quotients of the output DSL.</li>
</ul>
<ul>
<li>method <a class="el" href="classDGtal_1_1StandardDSLQ0.html#a8c09ea4e2a63c4fc47b9d266891dbe2d">StandardDSLQ0::reversedSmartDSS</a>, given this DSL, <em>A</em> and <em>B</em>, returns this minimal DSL in time proportional to the difference of depth between the input and the output slope.</li>
</ul>
<p>You may have a look at the following programs to check these algorithms (the many variants come from the different choices for the algorithm and the fraction type):</p>
<ul>
<li><a class="el" href="testStandardDSLQ0-smartDSS-benchmark_8cpp_source.html">testStandardDSLQ0-smartDSS-benchmark.cpp</a></li>
<li><a class="el" href="testStandardDSLQ0-reversedSmartDSS-benchmark_8cpp_source.html">testStandardDSLQ0-reversedSmartDSS-benchmark.cpp</a></li>
<li><a class="el" href="testStandardDSLQ0-LSB-reversedSmartDSS-benchmark_8cpp_source.html">testStandardDSLQ0-LSB-reversedSmartDSS-benchmark.cpp</a></li>
<li><a class="el" href="testStandardDSLQ0-LrSB-reversedSmartDSS-benchmark_8cpp_source.html">testStandardDSLQ0-LrSB-reversedSmartDSS-benchmark.cpp</a> </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 19:10:44 for DGtal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
