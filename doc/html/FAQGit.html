<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DGtal: Git/Github source code management in DGtal</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">0.6.devel</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Git/Github source code management in <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#sectGIT1">Setting up your account and working copy</a><ul><li class="level2"><a href="#subsectGIT11">Create an account on github.com</a></li>
<li class="level2"><a href="#subsectGIT12">Set up git</a></li>
<li class="level2"><a href="#subsectGIT13">Fork DGtal</a></li>
</ul>
</li>
<li class="level1"><a href="#sectGIT3">Normal workflow</a><ul><li class="level2"><a href="#subsectGIT31">Set remote repositories and get a local copy</a></li>
<li class="level2"><a href="#subsectGIT32">Edit files and commit in branches</a></li>
</ul>
</li>
<li class="level1"><a href="#sectGITCommands">Useful git commands</a><ul><li class="level2"><a href="#ssCom1">git stash</a></li>
<li class="level2"><a href="#ssCom2">git Tracking Branches</a></li>
<li class="level2"><a href="#ssCom3">git Deleting a remote Branch</a></li>
</ul>
</li>
<li class="level1"><a href="#sectGIT2">Basic comparison SVN/GIT</a><ul><li class="level2"><a href="#ss21">Clone == Checkout</a></li>
<li class="level2"><a href="#ss22">Update, Edit, add, commit, push</a></li>
</ul>
</li>
<li class="level1"><a href="#sectGIT5">Resolving GIT conflict (uncommon)</a></li>
</ul>
</div>
<div class="textblock"><dl class="section author"><dt>Author:</dt><dd>David Coeurjolly</dd></dl>
<p>This part of the manual describes how the <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> Git repository is used on github and gives a couple of details on the git system.</p>
<h1><a class="anchor" id="sectGIT1"></a>
Setting up your account and working copy</h1>
<h2><a class="anchor" id="subsectGIT11"></a>
Create an account on github.com</h2>
<ul>
<li>go to github.com, then Signup -&gt; Free account for opensource projects.</li>
<li>choose login/password and it's done</li>
<li>once it's ok, you're transferred to your "dashboard" with three options "Set up Git", "Create a Repo", "Fork a Repo" and "Be Social"</li>
<li>Select the first one.</li>
</ul>
<h2><a class="anchor" id="subsectGIT12"></a>
Set up git</h2>
<p>Github documentation is quite straightforward (see help/set up git in the Github web site).</p>
<p>In order to be to establish a secure connection between your computer and github servers and to be able to "push" changes to github servers, two methods are available: the SSH method or the HTTPS method, which is now recommended.</p>
<p>Note that in the HTTPS method, URLs look like "https://github.com/yourlogin/DGtal.git", whereas in the SSH method URLs look like "git@github.com:yourlogin/DGtal.git". The HTTPS method is used below.</p>
<p>In the meantime, you can also update your account settings (<a href="https://github.com/account">https://github.com/account</a>)</p>
<h2><a class="anchor" id="subsectGIT13"></a>
Fork DGtal</h2>
<p>Before going into details on git and git-commands, let's fork the initial <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository. So, once you're logged in on github</p>
<ul>
<li>go to <a href="https://github.com/DGtal-team/DGtal">https://github.com/DGtal-team/DGtal</a></li>
<li>click on the "Fork" button.</li>
<li>once the fork is finished, you'll have your own copy of <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> with the following path: <a href="https://github.com/yourlogin/DGtal">https://github.com/yourlogin/DGtal</a></li>
<li>At this URL, you're able to browse the sources, see the commit log, report issues, view/edit wiki pages,..</li>
</ul>
<h1><a class="anchor" id="sectGIT3"></a>
Normal workflow</h1>
<h2><a class="anchor" id="subsectGIT31"></a>
Set remote repositories and get a local copy</h2>
<p>Once you have fork the initial <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository, you can clone your fork to have a local copy of your own (remote) copy of <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a>:</p>
<div class="fragment"><div class="line">git clone https:<span class="comment">//github.com/yourlogin/DGtal.git</span></div>
</div><!-- fragment --><p>In order to easily access to the initial <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository, you can set it as a remote repository, called "upstream": </p>
<div class="fragment"><div class="line">git remote add upstream https:<span class="comment">//github.com/DGtal-team/DGtal.git</span></div>
</div><!-- fragment --><p>Git remotes are great because they allows to have multiple pull/push repositories. You can see the list of your remote repositories:</p>
<div class="fragment"><div class="line">git remote</div>
<div class="line">git remote -v</div>
</div><!-- fragment --><p>At this point, you should have two remote repositories:</p>
<ul>
<li>origin, your own copy of the initial <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository.</li>
<li>upstream, the remote repository you have just added containing the initial <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository.</li>
</ul>
<p>You can see the state of a remote repository called "remotename" with the command "git remote show":</p>
<div class="fragment"><div class="line">git remote show remotename</div>
</div><!-- fragment --><p>In the normal workflow, you can pull from the main <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> repository (upstream)...</p>
<div class="fragment"><div class="line">git pull upstream master</div>
</div><!-- fragment --><p>...but only push to your own copy of <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a> (origin).</p>
<div class="fragment"><div class="line">git push origin yourbranch</div>
</div><!-- fragment --><p>The merge between the two repositories is done by another developper after a pull request. To make a pull request, go to <a href="http://github.com/yourlogin/DGtal,">http://github.com/yourlogin/DGtal,</a> click on "Pull Request". Then, choose the two branches you would like to merge (master in upstream and yourbranch in origin), write your comments and click on "Send Pull Request".</p>
<h2><a class="anchor" id="subsectGIT32"></a>
Edit files and commit in branches</h2>
<p>0- Before starting to work, pull the upstream (you have to be online).</p>
<div class="fragment"><div class="line">git pull upstream master</div>
</div><!-- fragment --><p>1- By default, you have a main local branch called master. Create a local branch "cool-feature".</p>
<div class="fragment"><div class="line">git branch cool-feature</div>
</div><!-- fragment --><p>Note that you can see the list of your local branches:</p>
<div class="fragment"><div class="line">git branch</div>
</div><!-- fragment --><p>Note also that the branch marked with a star is your current local branch. At this point you should see</p>
<ul>
<li>* master</li>
<li>cool-feature </li>
</ul>
<p>2- Jump onto your new local branch:</p>
<div class="fragment"><div class="line">git checkout cool-feature</div>
</div><!-- fragment --><p>After taping the command "git branch" you should see now:</p>
<ul>
<li>master</li>
<li>* cool-feature</li>
</ul>
<p>3- Add files, edit files, commit local branch</p>
<div class="fragment"><div class="line">git add newFile</div>
<div class="line">git commit -a -m <span class="stringliteral">&quot;This commit concerns the cool-feature in newFile ...&quot;</span></div>
</div><!-- fragment --><p>Note that you can use the command "git status" or "git log" to have useful infos about the current branch state and the commits history.</p>
<p>4- Push to your fork (you have to be online)</p>
<div class="fragment"><div class="line">git push origin cool-feature</div>
</div><!-- fragment --><p>This creates a new branch in your remote copy of <a class="el" href="namespaceDGtal.html" title="Aim: Defines the concept describing a bidirectional const range.">DGtal</a>, which is called "cool-feature", like your local branch.</p>
<p>But this is a shortcut to:</p>
<div class="fragment"><div class="line">git push origin cool-feature:cool-feature</div>
</div><!-- fragment --><p>You can thus give a different name for your remote branch as follows:</p>
<div class="fragment"><div class="line">git push origin cool-feature:another-name</div>
</div><!-- fragment --><p>5- If you have to work on another issue (e.g. bug #42), you can create a new local branch "bug42" from your master, jump onto it, commit edits, and push:</p>
<div class="fragment"><div class="line">git checkout master</div>
<div class="line">git branch bug42</div>
<div class="line">git checkout bug42</div>
<div class="line">git commit -a -m <span class="stringliteral">&quot;Bug #42 fixed.....&quot;</span></div>
<div class="line">git push origin bug42</div>
</div><!-- fragment --><p>6- Once you have finished to work on an issue, go to <a href="http://github.com/yourlogin/DGtal">http://github.com/yourlogin/DGtal</a> and ask for a "Pull Request"</p>
<p>7- Once the "Pull Request" has been validate and the merge done, you can remove your local branch:</p>
<div class="fragment"><div class="line">git checkout master</div>
<div class="line">git branch -d cool-feature</div>
</div><!-- fragment --><p>And you can also remove the associated remote branch (because everything should be merged into either the "master" of your fork, or the "master" of DGtal-team):</p>
<div class="fragment"><div class="line">git push origin :cool-feature</div>
</div><!-- fragment --><h1><a class="anchor" id="sectGITCommands"></a>
Useful git commands</h1>
<p>In this section, we detail couple of useful git commands.</p>
<h2><a class="anchor" id="ssCom1"></a>
git stash</h2>
<p>Let suppose you have edited some files and that you figure out that these modifications should be in another branch (or you figure out that your are working on the wrong branch). The command </p>
<div class="fragment"><div class="line">git stash</div>
</div><!-- fragment --><p> will put all your edits (uncommited edits) into a patch stack (and remove them from your working copy). Then, you can create your new local branch and "pop" your edit from the stack to reapply the changes. E.g.: </p>
<div class="fragment"><div class="line">git pull <span class="comment">//up-to-date branch &quot;master&quot;</span></div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"><span class="comment">//edits</span></div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"><span class="comment">//well... these edits should be in a separate branch!</span></div>
<div class="line">git stash</div>
<div class="line">git branch newLocalBranch</div>
<div class="line">git checkout newLocalBranch</div>
<div class="line">git stash pop</div>
<div class="line"><span class="comment">//...</span></div>
<div class="line"><span class="comment">//edits</span></div>
<div class="line">git commit -a -m <span class="stringliteral">&quot;....&quot;</span> <span class="comment">//commit to new branch</span></div>
</div><!-- fragment --><p> To cleanup your stack: "git stash clear" </p>
<dl class="section note"><dt>Note:</dt><dd>In the previous example, it wouldn't have been possible to create/checkout a new branch since your current branch contained uncommited edits.</dd></dl>
<h2><a class="anchor" id="ssCom2"></a>
git Tracking Branches</h2>
<p>Tracking branches are directely associated to a remote branch. On tracked branch you can directely apply push and pull with no other argument. After a clone the resulting origin branch is a tracking branch.</p>
<div class="fragment"><div class="line">git checkout --track aRemote/aBranch</div>
</div><!-- fragment --><p>Then you will work on the new tracked branch aBranch</p>
<dl class="section note"><dt>Note:</dt><dd>the option &ndash;track work only from git version 1.6.2 and later. But you can perform equivalent with the following command: <div class="fragment"><div class="line">git checkout -b [myBranchName] [aRemoteName]/[aBranch]</div>
</div><!-- fragment --> </dd></dl>
<h2><a class="anchor" id="ssCom3"></a>
git Deleting a remote Branch</h2>
<p>After working on your remote branch you can remove it from your server by using this particular syntax:</p>
<div class="fragment"><div class="line"> git push aRemoteName :theBranchToDelete</div>
</div><!-- fragment --><h1><a class="anchor" id="sectGIT2"></a>
Basic comparison SVN/GIT</h1>
<h2><a class="anchor" id="ss21"></a>
Clone == Checkout</h2>
<div class="fragment"><div class="line">        svn checkout https:<span class="comment">//liris.cnrs.fr/dgtal/trunk</span></div>
<div class="line">        &lt;==&gt;</div>
<div class="line">        git clone git@github.com:DGtal-team/DGtal</div>
<div class="line">or</div>
<div class="line">        git clone https:<span class="comment">//DGtal-team@github.com/DGtal-team/DGtal</span></div>
</div><!-- fragment --><p> the clone will "clone" the repository with all its branches (default one "master" &lt;==&gt; "trunk" in SVN)</p>
<h2><a class="anchor" id="ss22"></a>
Update, Edit, add, commit, push</h2>
<ul>
<li>Fetch the changes from the server <div class="fragment"><div class="line">        svn update &lt;==&gt; git pull</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>add a file into the VC system: <div class="fragment"><div class="line">        svn add file &lt;==&gt; git add file</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>See the current status of your working copy <div class="fragment"><div class="line">        svn status &lt;==&gt; git status</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>commit locally your changes (git only) <div class="fragment"><div class="line">        git commit (commit the added files)</div>
<div class="line">        git commit -a (commit the added files and the modified files)</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>push the modifications to the server (in the git case, you'll push all your local commits) <div class="fragment"><div class="line">        svn commit &lt;==&gt; git push</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>create a branch <div class="fragment"><div class="line">        svn copy URL URL (server side branch, you need to be online)</div>
<div class="line">        &lt;==&gt;</div>
<div class="line">        git branch toto (offline local branch)</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>Jump to another branch <div class="fragment"><div class="line">        svn <span class="keywordflow">switch</span> URL (server-side branch...)</div>
<div class="line">        &lt;==&gt;    </div>
<div class="line">        git checkout toto (offline branch)</div>
</div><!-- fragment --></li>
</ul>
<ul>
<li>merge branches <div class="fragment"><div class="line">        svn merge URL (assuming your WC is trunk)</div>
<div class="line">        svn commit...</div>
<div class="line">        &lt;==&gt;</div>
<div class="line">        git checkout master (we go back to the <span class="stringliteral">&quot;trunk&quot;</span>)</div>
<div class="line">        git merge toto (merger toto-&gt;trunk)     </div>
<div class="line">        git commit -a ...</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="sectGIT5"></a>
Resolving GIT conflict (uncommon)</h1>
<p>Even it is very rare, conflit can appear when you try to apply a pull:</p>
<div class="fragment"><div class="line">&gt;git pull upstream master</div>
<div class="line"></div>
<div class="line">remote: Counting objects: 1, done.</div>
<div class="line">remote: Total 1 (delta 0), reused 1 (delta 0)</div>
<div class="line">Unpacking objects: 100% (1/1), done.</div>
<div class="line">From github.com:DGtal-team/DGtal</div>
<div class="line">   branch            master     -&gt; FETCH_HEAD</div>
<div class="line">Auto-merging doc/cellular-topology.dox</div>
<div class="line">CONFLICT (content): Merge conflict in doc/cellular-topology.dox</div>
<div class="line">Auto-merging src/DGtal/topology/KhalimskySpaceND.ih</div>
<div class="line">Automatic merge failed; fix conflicts and then commit the result.</div>
</div><!-- fragment --><p>To resolve the conflict you just have to apply the command:</p>
<div class="fragment"><div class="line">&gt; git mergetool</div>
</div><!-- fragment --><p>It will lunch simple tools like opendiff on MacOSX allowing to select the main file. After saving the merged file, you simply have to commit the new change:</p>
<div class="fragment"><div class="line">&gt; git commit -m <span class="stringliteral">&quot;Merging GIT conflict! &quot;</span> -a</div>
<div class="line">&gt; git pull upstream master</div>
</div><!-- fragment --><p>For further details, there exist plenty of git tutorials on the web. I strongly encourage you to have a look to the progit.org one (<a href="http://progit.org/book/">http://progit.org/book/</a>).</p>
<p>GitRef is also very nice: <a href="http://gitref.org/index.html">http://gitref.org/index.html</a></p>
<p>Important things:</p>
<ul>
<li>git branches are local (but we can publish a branch too)</li>
<li>easy merge</li>
<li>except pull/push, everything else can be done offline (with a consistent history). </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 19 2012 19:10:43 for DGtal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
